<!doctype html>
<html lang="en">

<head>
    <title>Thêm người dùng</title>
    <th:block th:insert="~{Dashboard/fragments/layout :: head}"></th:block>
</head>

<body id="root">
    <th:block th:insert="~{Dashboard/fragments/layout :: sidebar}"></th:block>
    <section id="main">
        <th:block th:insert="~{Dashboard/fragments/layout :: navbar}"></th:block>
        <div id="content">
            <div class="header">
                <h1 class="">Thêm/Sửa người dùng</h1>
                <ol class="breadcrumb m-0">
                    <li class="breadcrumb-item">Trang quản trị</li>
                    <li class="breadcrumb-item">Người dùng</li>
                    <li class="breadcrumb-item active">Thêm/Sửa người dùng</li>
                </ol>
            </div>
            <div class="container">
                <form action="/dashboard/addUser/save-or-update" method="post" th:object="${userNewE}" id="form">
                    <input th:field="*{id}" name="id" hidden>
                    <div class="row">
                        <div class="col-md-6 mb-2">
                            <div class="form-floating">
                                <input th:field="*{email}" type="email" name="email" class="form-control" placeholder=" " required id="email">
                                <label for="email">Địa chỉ email</label>
                            </div>
                        </div>
                        <div class="col-md-6 mb-2">
                            <div class="form-floating">
                                <input th:field="*{password}" type="password" name="password" class="form-control" placeholder=" " required
                                    id="password">
                                <label for="password" class="form-label">Mật khẩu</label>
                            </div>
                        </div>
                        <div class="col-md-6 mb-2">
                            <div class="form-floating">
                                <input th:field="*{username}" name="username" type="text" class="form-control" placeholder=" " required
                                    id="username">
                                <label for="username" class="form-label">Họ tên</label>
                            </div>
                        </div>
                        <div class="col-md-6 mb-2">
                            <div class="form-floating">
                                <input th:field="*{tel}" name="tel" type="number" class="form-control" placeholder=" " required id="tel">
                                <label for="tel" class="form-label">Số điện thoại</label>
                            </div>
                        </div>
                        <div class="col-md-6 mb-2">
                            <div class="form-floating">
                                <input th:field="*{deliveryAddress}" name="deliveryAddress" type="text"
                                    class="form-control" placeholder=" " required id="deliveryAddress">
                                <label for="deliveryAddress" class="form-label">Địa chỉ</label>
                            </div>
                        </div>
                        <div class="col-md-6 mb-2">
                            <div class="form-floating">
                                <select th:field="*{role}" class=" form-select" aria-label="Default select example">
                                    <option value="ADMIN">Admin</option>
                                    <option value="CUSTOMER">Customer</option>
                                </select>
                                <label class="">Chức vụ</label>
                            </div>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">Save</button>
                </form>
                <div th:if="${error != null}" id="errorDiv" class="alert alert-danger mt-2">
					<span th:text="${error}"></span>
				</div>
            </div>
        </div>
    </section>
    <th:block th:insert="~{Dashboard/fragments/layout :: footer}"></th:block>
    <script>
        document.getElementById("saveUpdateButton").addEventListener("click", saveOrUpdate);
        function saveOrUpdate() {
            var errorDiv = document.getElementById("errorDiv");
            var form = document.getElementById("form");
            var email = form.elements["email"].value;
            var password = form.elements["password"].value;

            if (!email || !password) {
                errorDiv.style.display = "block";
                return false;
            }
            errorDiv.style.display = "none";
            form.action = "/dashboard/addUser/save-or-update";
            form.submit();
        }
    </script>

    <script>
        function validateTel() {
            var input = document.getElementById('tel');
            input.value = input.value.replace(/[^0-9]/g, '');
        }


    </script>
</body>

</html>